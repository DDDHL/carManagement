"use strict";const e=require("../../common/vendor.js"),c={data(){return{carInfo:{},show:!1,title:"",content:"",type:"",popShow:!1,maintenance_km:0,km:0,license:""}},onLoad(){this.carInfo=this.$store.state.clickItem,this.flashData()},methods:{async getData(){},flashData(){this.maintenance_km=this.carInfo.maintenance_km,this.km=this.carInfo.km,this.license=this.carInfo.license},async save(){const o=e.Ls.database();if(this.content==="update"){if(!this.km||!this.maintenance_km||!this.license){e.index.showToast({icon:"error",title:"请填写完整！",duration:2e3});return}e.index.showLoading({title:"执行中",mask:!0}),await o.collection("carInfo").where(`_id=="${this.carInfo._id}"`).update({maintenance_km:this.maintenance_km,km:this.km,license:this.license}),e.index.hideLoading(),this.carInfo.maintenance_km=this.maintenance_km,this.carInfo.km=this.maintenance_km,this.carInfo.license=this.license,e.index.showToast({title:"更新成功",duration:1500}),this.popShow=!1}},toast(o){switch(this.type=o,o){case"set":this.title="设置定时提醒",this.content="set",this.popShow=!0;break;case"delete":this.title="删除操作",this.content="确定要删除该车辆？",this.show=!0;break;case"update":this.title="编辑车辆信息",this.content="update",this.popShow=!0;break}},confirm(){e.index.showLoading({title:"执行中",mask:!0}),this.deleteData(),this.show=!1},setToastTime(){},updateData(){},async deleteData(){await e.Ls.database().collection("carInfo").where(`_id=="${this.carInfo._id}"`).remove(),await e.Ls.callFunction({name:"carManager",data:{type:"deleteImg",fileUrls:this.carInfo.imgUrls}}),e.index.hideLoading(),e.index.showToast({title:"删除成功",mask:!0,duration:1500}),setTimeout(()=>{e.index.switchTab({url:"/pages/index/index"})},1500)}}};if(!Array){const o=e.resolveComponent("u-swiper"),u=e.resolveComponent("u-line"),i=e.resolveComponent("u-tag"),a=e.resolveComponent("u-button"),t=e.resolveComponent("u-modal"),s=e.resolveComponent("u--input"),n=e.resolveComponent("u-popup");(o+u+i+a+t+s+n)()}const r=()=>"../../node-modules/uview-plus/components/u-swiper/u-swiper.js",m=()=>"../../node-modules/uview-plus/components/u-line/u-line.js",l=()=>"../../node-modules/uview-plus/components/u-tag/u-tag.js",p=()=>"../../node-modules/uview-plus/components/u-button/u-button.js",h=()=>"../../node-modules/uview-plus/components/u-modal/u-modal.js",_=()=>"../../node-modules/uview-plus/components/u--input/u--input.js",d=()=>"../../node-modules/uview-plus/components/u-popup/u-popup.js";Math||(r+m+l+p+h+_+d)();function w(o,u,i,a,t,s){return e.e({a:e.p({list:t.carInfo.imgUrls,height:"300",["img-mode"]:"aspectFit",indicator:!0,indicatorMode:"line",circular:!0}),b:e.p({text:"车牌号",size:"mini"}),c:e.t(t.carInfo.license),d:e.p({text:"公里数",size:"mini",type:"warning"}),e:e.t(t.carInfo.km),f:e.t(t.carInfo.maintenance_km),g:e.o(n=>s.toast("delete")),h:e.p({type:"error",text:"删除车辆"}),i:e.o(n=>s.toast("set")),j:e.p({type:"warning",text:"设置提醒"}),k:e.o(n=>s.toast("update")),l:e.p({type:"success",text:"编辑信息"}),m:e.o(n=>t.show=!1),n:e.o(s.confirm),o:e.p({show:t.show,showCancelButton:!0,buttonReverse:!0,title:t.title,content:t.content}),p:e.t(t.title),q:t.content==="update"},t.content==="update"?{r:e.o(n=>t.license=n),s:e.p({placeholder:"请输入车牌号",border:"surround",modelValue:t.license}),t:e.o(n=>t.km=n),v:e.p({placeholder:"请输入公里数",type:"number",border:"surround",modelValue:t.km}),w:e.o(n=>t.maintenance_km=n),x:e.p({placeholder:"请输入保养公里数",type:"number",border:"surround",modelValue:t.maintenance_km})}:{},{y:e.o(s.save),z:e.p({type:"success",text:"保存设置"}),A:e.o(n=>t.popShow=!1),B:e.p({show:t.popShow,mode:"bottom",round:"20"})})}const f=e._export_sfc(c,[["render",w],["__scopeId","data-v-64f3582a"],["__file","D:/object2/carManagement/pages/carInfo/carInfo.vue"]]);wx.createPage(f);
